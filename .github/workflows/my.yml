name: Run nodejs index.js
on: [push]
jobs:
  run-script:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node.js and npm
        run: |
          sudo apt-get update
          sudo apt-get install -y nodejs npm expect
      - run: npm i
      - run: curl -o pagekite.py https://pagekite.net/pk/pagekite.py && chmod +x pagekite.py
      - name: Run pagekite.py with Expect and node
        run: |
          expect <<EOF &
          spawn ./pagekite.py tsirtswd.pagekite.me
          expect "What is your e-mail address?"
          send "example@example.com\r"
          interact
          EOF
          node . & ./pagekite.py tsirtswd.pagekite.me &
